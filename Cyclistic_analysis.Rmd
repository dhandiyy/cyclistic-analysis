---
title: "Cyclistic Analysis"
author: "Dhandi Yudhit Yuniar"
date: "2023-08-20"
output:
  html_document: default
  pdf_document: default
---

**Studi kasus ini dikerjakan untuk menyelesaikan tugas Capstone Project in Google Data Analytics Certificate - [Coursera](https://www.coursera.org/programs/proa-analitik-data-google-o8klv/professional-certificates/analitik-data-google?collectionId=skill~data-analysis)**\

#### **Latar Belakang**

Cyclistic merupakan sebuah perusahaan fiksi yang bergerak dibidang penyewaan/berbagi sepeda di Chicago, memiliki 5.824 armada sepeda dan 692 stasiun di seluruh Chicago. Cyclistic menawarkan tiket sekali jalan, tiket sehari penuh, dan keanggotaan tahunan. Pelanggan yang membeli tiket sekali jalan atau tiket sehari penuh disebut sebagai [pengendara kasual]{.underline}. Pelanggan yang membeli keanggotaan tahunan adalah [anggota tahunan]{.underline}.

Saya adalah seorang analis data junior yang bekerja di tim analis pemasaran di Cyclistic. Direktur pemasaran percaya bahwa kesuksesan perusahaan di masa depan tergantung pada upaya untuk **memaksimalkan jumlah keanggotaan tahunan**. Oleh karena itu, tim saya ingin memahami bagaimana pengendara kasual dan anggota tahunan menggunakan sepeda Cyclistic secara berbeda. Dari wawasan ini, tim saya akan merancang strategi pemasaran baru untuk mengubah pengendara biasa menjadi anggota tahunan.

Dalam menyelesaikan tugas bisnis yang diberikan, saya menggunakan **bahasa pemrograman R** dan kerangka kerja yang telah saya pelajari di Coursera sebagai Data Analysis.\
\

#### **Kerangka Kerja**

+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
| Proses Analisi Data                                                                 | Tugas                                                                                                                    |
+=====================================================================================+==========================================================================================================================+
| **Bertanya**                                                                        | 1.  Membuat dokumen lingkup kerja (SOW)                                                                                  |
|                                                                                     |                                                                                                                          |
| Pemahaman tentang projek dan ekspektasi pemangku kepentingan                        | 2.  Mendefinisikan tujuan projek dan ekspektasi pemangku kepentingan                                                     |
|                                                                                     |                                                                                                                          |
|                                                                                     | 3.  Membuat pertanyaan yang menjawab tujuan projek                                                                       |
+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
| **Persiapan**                                                                       | 1.  Mengidentifikasi data yang dibutuhkan dan sumber data yang tersedia                                                  |
|                                                                                     |                                                                                                                          |
| Mempersiapkan data dan cara untuk menyelesaikan projek dengan baik dan benar        | 2.  Menggunakan teknik *ROCCC (Reliability, Origins, Comprehensiveness, Current relevance, and Credibility)* pada data   |
+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
| **Proses**                                                                          | 1.  Membersihkan, mengurutkan dan memfilter data                                                                         |
|                                                                                     |                                                                                                                          |
| Menjalankan hasil persiapan dan menyiapkan data agar siap digunakan                 | 2.  Menggunakan *principle of data integrity*                                                                            |
|                                                                                     |                                                                                                                          |
|                                                                                     | 3.  Membuat dokumentasi dari pembersihan, pengurutan dan pemfilteran data                                                |
+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
| **Analisa**                                                                         | 1.  Memahami data secara mendalam                                                                                        |
|                                                                                     |                                                                                                                          |
| Menganalisa data untuk menjawab tujuan projek                                       | 2.  Mengidentifikasi tren dan hubungan dalam data dalam menyelesaikan tujuan projek                                      |
|                                                                                     |                                                                                                                          |
|                                                                                     | 3.  Memvalidasi hasil analisa dengan pakar dibidangnya                                                                   |
|                                                                                     |                                                                                                                          |
|                                                                                     | 4.  Membuat visualisasi dari hasil analisa                                                                               |
+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
| **Berbagi**                                                                         | Membuat laporan presentasi, dashboard dan laporan pelangkap lain dari hasil analisa                                      |
|                                                                                     |                                                                                                                          |
| Membagikan hasil analisa kepada pihak yang terkait                                  |                                                                                                                          |
+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
| **Bertindak**                                                                       | Menerapkan hasil anlisa berupa temuan atau rekomendasi bersama pihak yang terkait untuk menjalankan projek sesuai tujuan |
|                                                                                     |                                                                                                                          |
| Bekerja dengan pemangku kepentingan untuk menerapkan cara terbaik dari hasil anlisa |                                                                                                                          |
+-------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+

------------------------------------------------------------------------

------------------------------------------------------------------------

# [Bertanya]{.underline}

**Pandangan Awal:**

**Produk:** Layanan peminjaman/berbagi sepeda dengan jaringan di seluruh Chicago.

**Jenis Pelanggan dan Model Pendapatan:** anggota tahunan (langganan tahunan) dan pengendara kasual (pembelian sekali jalan dan harian).

**Keunggulan:** Ragam jenis sepeda (segmentasi konsumen yang luas) dan fleksibilitas dalam penetapan harga.

Proses bertanya akan menghasilkan tujuan projek, tugas bisnis, ekspektasi pemangku kepentingan, pertanyaan untuk tujuan projek, timeline dan output yang akan dihasilkan dalam projek ini, semua hal tersebut dirangkum dalam dokumen ruang lingkup kerja, dokumen tersebut dapat diakses [disini](https://github.com/dhandiyy/cyclistic-analysis/blob/main/Scope%20Of%20Work-Cyclistic.pdf).

------------------------------------------------------------------------

# [Persiapan]{.underline}

Saya akan menggunakan data perjalanan historis Cyclistic untuk menganalisis dan mengidentifikasi tren. Data yang digunakan berada dalam kurun waktu 12 bulan (Januari-Desember) pada tahun 2022, anda dapat melihat kumpulan datanya [disini](https://divvy-tripdata.s3.amazonaws.com/index.html). Data telah disediakan oleh Motivate International Inc, dengan [lisensi](https://ride.divvybikes.com/data-license-agreement) berikut.

Data yang digunakan disimpan dalam format *csv* yang dibagi per-bulan, nantinya data akan digabungkan untuk memudahkan dalam analisa.

Cek kuliatas data menggunakan prinsip *ROCCC:*

-   **Realiable** ⚠️

    Dari pengamatan awal terdapat records pada data yang tidak lengkap, memiliki duplikasi dan terdapat format yang tidak konsisten. Pengamatan ini akan saya bahas lebih jelas pada tahap proses.

-   **Original** ✔️

    Data yang digunakan berasal dari pihak pertama yaitu Motivate International Inc dan tidak menggunakan data dari pihak kedua maupun ketiga

-   **Comprehensif** ✔️

    Data yang digunakan sudah cukup lengkap untuk menjawab tugas bisnis dan tujuan projek, tapi hasil analisa akan lebih valid jika menambahkan data yang lebih banyak.

-   **Current** ✔️

    Data tergolong baru karena menggunakan data tahun lalu dan mempunyai informasi yang relevant

-   **Cited** ✔️

    Data dikutip dari pihak pertama

------------------------------------------------------------------------

------------------------------------------------------------------------

# [Proses]{.underline}

### **Integritas dan Etika Data**

Data memiliki format yang benar pada setiap kolom, memiliki akurasi serta konsistensi pada sebagian besar data, serta memiliki keabsahan dan kelengkapan yang baik untuk menjawab tugas bisnis dan tujuan projek.

Data disimpan dalam cloud repository pihak pertama, dapat diakses secara publik, terbebas dari informasi pribadi pengguna dan memiliki lisensi yang terpercaya.

### **Proses pembersihan data:**

-   Install packages yang diperlukan, saya menggunakan package `tidyverse` dan `data.table` untuk pengolahan data yang besar

```{r load package, echo=TRUE}
library(tidyverse)
library(data.table)
```

\

-   Pengenalan awal tentang data yang tersedia, dengan cara mengamati salah satu file csv untuk mendapatkan pandangan awal tentang data. File yang akan saya gunakan yaitu data perjalanan pada bulan januari tahun 2022

```{r cek data awal}
# Mendapatkan jalur ke direktori script saat ini
current_dir <- getwd()

# Buat jalur lengkap ke salah satu file CSV
csv_path <- file.path(current_dir, "Dataset", "202201-divvy-tripdata.csv")

# Menggunakan data.table untuk membaca file CSV
data_example <- fread(csv_path)

head(data_example)

```

\

-   Menggunakan fungsi lain untuk pengamatan data yaitu `glimpse`dan `summary`. Kedua fungsi ini sudah cukup lengkap dalam memberikan informasi mengenai data secara garis besar

```{r cek data menggunakan fungsi lain}
glimpse(data_example)
```

```{r}
summary(data_example)
```

Pemahaman awal tentang data didapatkan bahwa data memiliki 13 kolom yaitu `ride_id`, `rideable_type`, `started_at`, `ended_at`, `start_station_name`, `start_station_id`, `end_station_name`, `end_station_id`, `start_lat`, `start_lng`, `end_lat`, `end_lng`, `member_casual` dengan 103.770 baris.\
\

-   Menggabungkan beberapa data (file csv) yang akan digunakan untuk analisa, penggabungan data dilakukan untuk memudahkan dalam menganalisa data dalam rentang satu tahun. Sebelum melakukan penggabungan data saya akan lakukan pemeriksaan konsistensi kolom dan dimensi tiap dataset/file

```{r}
csv_folder <- file.path(current_dir, "Dataset")

# List semua file CSV dalam folder Anda 
csv_files <- list.files(path = csv_folder, pattern = "2022", full.names = TRUE)

# Loop melalui setiap file CSV dan tampilkan dimensinya
for (csv_file in csv_files) {
  # Membaca data CSV tanpa memuat seluruh data ke memori (metada)
  # karena nrows = 0
  data <- fread(csv_file, nrows = 0)
  
  # Mendapatkan dimensi
  dimensions <- dim(data)
  
  # Menampilkan nama file dan dimensi
  cat("File:", basename(csv_file), "\n")
  cat("Rows:", dimensions[1], "Columns:", dimensions[2], "\n\n")
}
```

\

-   Melakukan pengecekan nama kolom tiap data/file csv

```{r}
first_file_cols <- NULL 
check_difference <- FALSE
for (csv_file in csv_files){
  if (is.null(first_file_cols)){
    first_file_cols <- colnames(fread(csv_file))
  }else{
    current_cols <- colnames(fread(csv_file))
    if(!identical(first_file_cols, current_cols)){
      cat("Perbedaan nama kolom pada file:", csv_file, "\n")
      check_difference <- TRUE
    }
  }
}
#jika tidak ada perbedaan cetak:
if (!check_difference){
  cat("Semua file CSV memiliki nama kolom yang sama")
}
```

\

-   Gabungkan semua file ketika nama kolom pada semua file sudah sama

```{r}
library(data.table)
combined_data <- data.table()

# Loop melalui setiap file CSV untuk menggabungkannya
for (csv_file in csv_files) {
  # Membaca data dari file CSV dan menggabungkannya dengan data yang sudah ada
  current_data <- fread(csv_file, na.strings = c("",NA))
  combined_data <- rbind(combined_data, current_data)
}

# Menyimpan data yang telah digabungkan ke dalam satu file CSV
fwrite(combined_data, "combined_data.csv")
```

\

-   Lakukan pemeriksaan kembali data yang sudah digabungkan

```{r}
dim.data.frame(combined_data)
```

**Terdapat 5.667.717 baris dan 13 kolom\
**

```{r}
head(combined_data)
```

\

-   Saya akan menggunakan fungsi `skimr_without_chart` untuk melakukan pemeriksaan pada data karena fungsi ini memberikan ringkasan lengkap mengenai data. Output fungsi menghasilkan nilai dibawah ini:\

![](skimr.png){width="726"}

\
---note: output fungsi ini tidak dapat ditampilkan saat dilakukan export ke HTML dari dokumen R Markdown yang saya gunakan sekarang.

Terdapat missing value pada kolom **start_station_name, start_station_id, end_station_name, end_station_id** maksimal sebesar **16%** serta missing value juga terdapat pada kolom **end_lat** dan **end_lng** sebesar **1%**

Missing value pada baris yang hilang tidak akan dihapus karena kita akan gunakan informasi pada kolom yang lain pada baris tersebut. Agar tidak terjadi kebingungan dan memberikan kepastian, saya akan menyebut data/ file csv yang sudah digabungkan sebagai **tabel**.\
\

-   Lakukan pemeriksaan duplikasi baris pada kolom **`ride_id`** yang menjadi **primary key** pada tabel yang digunakan sedangkan kolom yang identik dengan `ride_id` yaitu kolom `start_station_id` dan `end_station_id` akan diabaikan jika terdapat duplikasi karena kedua kolom tersebut menjadi foreign key pada tabel.

```{r}

# Menghitung jumlah data yang duplicate pada kolom ride_id
duplicate_count_ride_id <- sum(duplicated(combined_data$ride_id))

# Output
print(paste0("Jumlah data duplicate pada kolom ride_id: ", duplicate_count_ride_id))
```

\

-   Lakukan pemeriksaan apakah ada data yang tidak konsisten pada kolom `started_at` dan `ended_at`; selisih waktu menghasilkan nilai minus atau nol

```{r}
# Memeriksa konsistensi kolom
inconsistent_data <- combined_data %>%
  filter(started_at >= ended_at | started_at == ended_at)

# Output
if (nrow(inconsistent_data) > 0) {
  print("Terdapat data dengan konsistensi yang tidak sesuai.")
  print(inconsistent_data)
} else {
  print("Semua data dalam kolom waktu datang dan waktu pulang konsisten.")
}
```

\

-   Terdapat 531 baris yang tidak konsisten, baris tersebut akan dihapus karena butuh validasi lanjutan untuk memperbaiki baris tersebut dengan stakeholder

```{r}
data_cleaned <- combined_data %>%
  filter(started_at < ended_at, started_at != ended_at)

head(data_cleaned)
```

\

-   cek apakah bisa mencari selisih waktu ketika kolom `started_at` dan `ended_at sudah diperbaiki`

```{r}
baris_pertama  <- data_cleaned[3, ]
selisih_waktu_ex <- baris_pertama$ended_at - baris_pertama$started_at
print(selisih_waktu_ex)
```

\

-   **Memperbaiki missing value**. Setelah pemeriksaan dan perbaikan selesai pada tiap kolom yang penting pada tabel, saya akan lanjutkan untuk memperbaiki missing value. Pertama, saya akan memisahkan dulu baris yang memiliki nilai NA menjadi tabel tersendiri agar saya dapat dengan mudah memprosesnya.

```{r}
data_cleaned_na <- data_cleaned %>%
  filter(is.na(start_station_name) | is.na(start_station_id) | is.na(end_station_name) | is.na(end_station_id) | is.na(end_lat) | is.na(end_lng))

str(data_cleaned_na)
```

```{r}
data_cleaned_na
```

\

-   Mencari missing value pada kolom `start_station_name` dengan cara memisahkan kolom `start_station_name`, `start_lat` dan `start_lng`, kita gunakan informasi yang berada pada kolom `start_lat` dan `start_lng` dengan harapan setian station name memiliki latitude dan longitude yang berpasangan , jika ini cara ini berhasil maka akan dilakukan juga untuk kolom end_station_name.

```{r}
tabel_distinct_ssn <- data_cleaned_na %>%
  select(start_station_name, start_lat, start_lng) %>%
  distinct(start_lat,start_lng, .keep_all = TRUE)
```

\
lihat hasil

```{r}
tabel_distinct_ssn
```

Terdapat **1,577 rows** ketika distinct menggunakan nama dan **420,803 rows** ketika distinct menggunakan start_lat dan start_lng\

```{r}
filtered_distinct_ssn <- tabel_distinct_ssn %>%
  filter(grepl("^41.95", start_lat) & grepl("^-87.65", start_lng))

filtered_distinct_ssn
```

\
Hasilnya **tidak ditemukan** pasangan data pada setiap baris `start_station_name` dengan latitude dan longitudenya. Artinya, pendekatan ini tidak bisa digunakan untuk memperbaiki data yang hilang.

ketika data missing saya akan mencoba untuk mencarinya tetapi jika tidak menemukan data yang dicari, kita bisa langsung tanyakan pada stakeholder/pihak yang terkait untuk mencari tahu apa yang terjadi pada data point ini atau apakah ada sumber data lain yang bisa digunakan. Namun saya tidak punya akses untuk sumber daya seperti ini, jadi saya tetap mempertahankan data yang ada. Dengan sisa data yang ada perhitungan maupun analisa yang dihasilkan akan tetap benar jika mengacu pada *statiscal power*.\
\

-   Memperbaiki value agar lebih informatif dan mudah dibaca, seperti yang akan saya lakukan pada kolom `rideable_type` dan `member_casual`

```{r}
data_cleaned %>%
  select(rideable_type, member_casual) %>%
  distinct(rideable_type, member_casual)
```

```{r}
data_cleaned <- data_cleaned %>%
  mutate(rideable_type = case_when(
    rideable_type == "electric_bike" ~ "Electric Bike",
    rideable_type == "classic_bike" ~ "Classic Bike",
    rideable_type == "docked_bike" ~ "Docked Bike",
    TRUE ~ rideable_type  # Jika tidak ada perubahan, biarkan nilai asli
    ),
    member_casual = case_when(
      member_casual == "casual" ~ "Casual Member",
      member_casual == "member" ~ "Annual Member",
      TRUE ~ member_casual
    )
  )
```

\

-   Memisahkan bulan, hari dan jam pada kolom `started_at` dan `ended_at` untuk memahami pola penggunaan sepeda berdasarkan waktu yang lebih spesifik, seperti jam-jam sibuk, hari-hari tertentu, atau perbedaan musiman. Saya gunakan fungsi `mutate()` dari package `diplyr` untuk menambahkan kolom baru dan menggunakan package `lubridate` untuk mengekstrak informasi tentang bulan, hari, serta jam.

```{r}

data_cleaned <- data_cleaned %>%
  mutate(
    start_month = lubridate::month(started_at),
    start_day = lubridate::day(started_at),
    start_hour = lubridate::hour(started_at),
    end_month = lubridate::month(ended_at),
    end_day = lubridate::day(ended_at),
    end_hour = lubridate::hour(ended_at)
  )


```

\
Karena `start_month` dan `end_month` nomer bulan bukan nama bulan, saya perlu untuk mengubah value pada kolom `start_month` dan `end_month` menjadi nama bulannya. Saya terapkan juga pada kolom `start_day` dan `end_day`

```{r}

data_cleaned <- data_cleaned %>%
  mutate(
    start_month = month.name[lubridate::month(started_at)],
    end_month = month.name[lubridate::month(ended_at)]
  )

```

```{r}
data_cleaned <- data_cleaned %>%
  mutate(
    start_day_of_week = weekdays.Date(started_at),
    end_day_of_week = weekdays(ended_at)
  )

```

```{r}
data_cleaned <- data_cleaned %>%
  mutate(start_day_of_week = case_when(
    start_day_of_week == "Senin" ~ "Monday",
    start_day_of_week == "Selasa" ~ "Tuesday",
    start_day_of_week == "Rabu" ~ "Wednesday",
    start_day_of_week == "Kamis" ~ "Thursday",
    start_day_of_week == "Jumat" ~ "Friday ",
    start_day_of_week == "Sabtu" ~ "Saturday ",
    start_day_of_week == "Minggu" ~ "Sunday",
    TRUE ~ start_day_of_week  # Jika tidak ada perubahan, biarkan nilai asli
    ),
    end_day_of_week = case_when(
    end_day_of_week == "Senin" ~ "Monday",
    end_day_of_week == "Selasa" ~ "Tuesday",
    end_day_of_week == "Rabu" ~ "Wednesday",
    end_day_of_week == "Kamis" ~ "Thursday",
    end_day_of_week == "Jumat" ~ "Friday ",
    end_day_of_week == "Sabtu" ~ "Saturday ",
    end_day_of_week == "Minggu" ~ "Sunday",
    TRUE ~ end_day_of_week
    )
    
  )
```

```{r}
head(data_cleaned)

```

```{r}
dim.data.frame(data_cleaned)
```

Tabel sekarang memiliki **5.667.186 baris** dan **21 kolom** dengan format yang benar. Sekarang data sudah dapat kita proses untuk menjawab tujuan projek!\

------------------------------------------------------------------------

------------------------------------------------------------------------

# [Analisa]{.underline}

Sebelum analisa dilakukan, sebaiknya kita perlu memikirkan ulang tujuan projek, tugas bisnis dan ekspektasi pemangku kepentingan

**Tujuan:**

Merancang strategi pemasaran yang bertujuan untuk mengubah anggota biasa menjadi anggota tahunan dan meningkatkat jumlah pengendara tahunan sebanyak 20% selama satu tahun. Hasil akhirnya akan merekomendasikan strategi pemasaran untuk meningkatkan jumlah penumpang tahunan.

**Tugas bisnis:**

Menganalisis data perjalanan sepeda Cyclistic untuk mengidentifikasi trend dan kebiasaan pengendara tahunan maupun pengendara biasa.

Dari tugas bisnis kita mengetahui dua hal yang penting adalah **mengidentifikasi trend dan kebiasaan** pada masing-masing pengendara. Ayo kita gali lebih dalam data yang kita punya, Let's goo!!!!

### **Identifikasi Trend dan Kebiasaan**

Dari pertanyaan yang sudah dibuat diawal, kita akan mencari **perbedaan setiap hal, karakteristik dan kebiasaan** yang ada pada Annual Member dengan Casual Member

-   Jumlah Perjalanan/Pengguna keseluruhan

```{r}
library(tidyverse)
library(data.table)
library(dplyr)
library(ggplot2)
library(ggthemes)
```

```{r}
data_per_member <- data_cleaned[,c(.N), by=c("member_casual")]
data_per_member <- data_per_member %>%
  mutate(Persentase = (V1 / sum(V1)) * 100)
```

```{r,  warning=FALSE}
library(RColorBrewer)
library(ggrepel)

palet_warna <- brewer.pal(1, "Set2")
viz_total <- ggplot(data_per_member, aes(x = "", y = V1, fill = member_casual)) +
  geom_col(width = 1) +
  coord_polar(theta = "y", start = pi/2) +
  scale_fill_manual(values = palet_warna) +
  geom_label_repel(data = data_per_member,
    aes(y = V1, label = paste0(round(Persentase, 1), "%")),
    size = 4.5, nudge_x = 0.7, show.legend = FALSE)+
  theme_minimal()+
  theme_void()+
  labs(title = "Total Cyclistic Member",
       subtitle = "Member in January-December 2022",
       fill = guide_legend(title = "Member Tipe")) +
  theme(plot.title = element_text(face ="bold"))

viz_total
```

\
Jumlah **Annual Member sebanyak 3.345.417 atau 59%** dan jumlah **Casual Member sebanyak 2.321.769 atau 41%**. Tujuan dari projek analisa ini yaitu membuat strategi pemasaran untuk meningkatkan 20% (669.084 anggota) jumlah Annual member selama satu tahun, artinya dalam tiap bulan diharuskan terjadi peningkatan anggota Annual member sebanyak **55.757 anggota.**

-   Jumlah Perjalanan/Pengguna per Bulan

```{r}
data_per_month <- data_cleaned[,c(.N),by=c("start_month","member_casual")]
```

```{r,  warning=FALSE}
viz_month <- ggplot(data = data_per_month, aes(x=start_month, y = V1, fill=member_casual))+
  geom_bar(stat="identity", position="dodge")+
  scale_fill_manual(values = palet_warna) +
  labs(title ="Total Trips per Month", x="Month", y="Total Trips", fill="Member Tipe", subtitle="Trip in January-December 2022")+
  scale_y_continuous(breaks = c(0,200000, 400000), labels = c("0","200k","400k"))+
  theme_minimal()+
  theme(axis.text.x = element_text(angle = 45, hjust = 1),
        plot.title = element_text(face="bold"))+
  scale_x_discrete(limits = c("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"))

viz_month
```

\
Mencari nilai rata-rata pada perjalanan bulanan tiap tipe member, data ini akan membantu kita untuk menemukan bulan mana yang memiliki nilai diatas rata-rata agar strategi pemasaran lebih fokus pada bulan tersebut

```{r}
mean_per_month_am <- data_per_month[member_casual=="Annual Member", mean(V1)]
mean_per_month_cm <- data_per_month[member_casual=="Casual Member", mean(V1)]
mean_per_month_am
mean_per_month_cm

```

\
Perjalanan/penggunan rata-rata per bulan untuk **Annual Member** sebesar **278.784** dan untuk **Casual Member** sebesar **193.480**

Mencari bulan yang memiliki jumlah perjalanan/pengguna lebih dari rata-rata tiap tipe member

```{r}
result_mean_am <- data_per_month %>%
  filter(member_casual=="Annual Member") %>%
  filter(V1>mean_per_month_am)

result_mean_am
```

```{r}
result_mean_cm <- data_per_month %>%
  filter(member_casual=="Casual Member") %>%
  filter(V1>mean_per_month_cm)

result_mean_cm
```

Bulan yang memiliki jumlah perjalanan/pengguna lebih dari rata-rata tiap tipe member adalah sama, yaitu bulan **Mei, Juni, July, Agustus, September dan Oktober**

Perjalanan/penggunan terbanyak untuk **Annual Member** terjadi pada **Agusutus** sebanyak **426.969** dan perjalanan/penggunan terbanyak untuk **Casul Member** terjadi pada **Juli** sebanyak **406.013.**

Menambahkan nilai rata-rata pada grafik

```{r}
viz_month <- viz_month + 
  geom_hline(aes(yintercept = mean_per_month_am, color = "blue"), linetype = "dashed", show.legend = FALSE) +
  geom_hline(aes(yintercept = mean_per_month_cm, color = "red"), linetype = "dashed", show.legend = FALSE) +
  annotate("text", x = 1.5, y = mean_per_month_am, label = paste("Avg Annual Member"), 
           vjust = -1, hjust = 0.5, size = 2.5) +
  annotate("text", x = 1.5, y = mean_per_month_cm, label = paste("Avg Casual Member"), 
           vjust = -1, hjust = 0.5, size = 2.5)

viz_month
```

```{r}
ggsave("viz_month.png", viz_month, width = 8, height = 6, units = "in")
```

Jika kita ingin mengetahui alasan kenapa diagram di atas bisa terjadi, kita bisa membandingkan dengan data tentang cuaca, suhu dan musim per tahun. Namun, saya tidak dapat menemukan informasi yang dibutuhkan untuk dilakukan analisa, oleh karena itu saya hanya akan membandingkan dengan visual yang sudah disediakan oleh website <https://id.weatherspark.com/>.

![Rata-rata Suhu Tertinggi dan Terdingin di Chicago](Rata-rata%20Suhu%20Tertinggi%20dan%20Terdingin%20inChicago.png)

\
Dari diagram yang sudah kita buat dan diagram dari situs <https://id.weatherspark.com/> didapatkan bahwa peningkatan jumlah pengguna/perjalanan dipengaruhi oleh suhu dan musim. Pada bulan juni-September di chicago merupakan musim panas/summer.\
\

-   Jumlah Perjalanan/Pengguna per Hari

```{r}
data_per_day <- data_cleaned[,c(.N),by=c("start_day_of_week","member_casual")]
```

```{r}
viz_day <- ggplot(data = data_per_day, aes(x=start_day_of_week, y = V1, fill=member_casual))+
  geom_bar(stat="identity", position="dodge")+
  scale_fill_manual(values = palet_warna) +
  labs(title ="Total Trips per Day", x="Day", y="Total Trips", fill="Member Tipe", subtitle="Trip in Sunday-Saturday 2022")+
  scale_y_continuous(breaks = c(0,200000, 400000), labels = c("0","200k","400k"))+
  theme_minimal()+
  theme(axis.text.x = element_text(angle = 45, hjust = 1),
        plot.title = element_text(face="bold"))+
  scale_x_discrete(limits = c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday ", "Saturday ", "Sunday"))
  

```

```{r}
viz_day
```

\
Perjalanan/penggunan terbanyak untuk **Annual Member** terjadi pada hari **Kamis** sebanyak **532.215** dan perjalanan/penggunan terbanyak untuk **Casul Member** terjadi pada hari **Sabtu** sebanyak **437.130**.

\
Mencari nilai rata-rata pada perjalanan harian tiap tipe member, data ini akan membantu kita untuk menemukan hari mana yang memiliki nilai diatas rata-rata agar strategi pemasaran lebih fokus pada hari tersebut

```{r, warning=FALSE}
mean_per_day_am <- data_per_day[member_casual=="Annual Member", mean(V1)]
mean_per_day_cm <- data_per_day[member_casual=="Casual Member", mean(V1)]
mean_per_day_am
mean_per_day_cm
```

Perjalanan/penggunan rata-rata per hari untuk **Annual Member** sebesar **477.916** dan untuk **Casual Member** sebesar **331.681**

Mencari bulan yang memiliki jumlah perjalanan/pengguna lebih dari rata-rata tiap tipe member

```{r}
result_mean_cm_day <- data_per_day %>%
  filter(member_casual=="Casual Member") %>%
  filter(V1>mean_per_day_cm)

result_mean_cm_day
```

```{r}
result_mean_am_day <- data_per_day %>%
  filter(member_casual=="Annual Member") %>%
  filter(V1>mean_per_day_am)

result_mean_am_day
```

Hari yang memiliki jumlah perjalanan/pengguna lebih dari rata-rata untuk Annual member terjadi pada hari **selasa, rabu dan kamis**, sedangkan pada Casual member terjadi pada hari **jum'at, sabtu dan minggu**. Sesuai dengan tujuan/goal project ini, strategi pemasaran dapat difokuskan pada hari **jum'at, sabtu dan minggu.**

Jika kita perhatikan lebih jauh, Annual member merupakan pengguna yang aktif pada hari weekday dan Casual member merupakan pengguna yang aktif pada weekend. Temuan ini dapat dikembangkan untuk mengetahui apakah Annual member ternyata sekelompok orang yang menggunakan layanan sepeda untuk pergi bekerja dan Casual member ternyara sekelompok orang yang menggunakan layanan sepeda untuk liburan. Kita akan lakukan analisa lebih lanjut untuk memastikan hipotesa ini.

Menambahkan nilai rata-rata pada grafik

```{r}
viz_day <- viz_day + 
  geom_hline(aes(yintercept = mean_per_day_am, color = "red"), linetype = "dashed", show.legend = FALSE) +
  geom_hline(aes(yintercept = mean_per_day_cm, color = "blue"), linetype = "dashed", show.legend = FALSE) +
  annotate("text", x = 1.5, y = mean_per_day_am, label = paste("Avg Annual Member"), 
           vjust = -1, hjust = 0.5, size = 2.5) +
  annotate("text", x = 1.5, y = mean_per_day_cm, label = paste("Avg Casual Member"), 
           vjust = -1, hjust = 0.5, size = 2.5)

viz_day
```

-   Cek hipotesa mengenai informasi latar belakang tiap member dari letak koordinat station yang digunakan

Kita dapat menggunakan data mengenai lat dan long untuk mencari titik yang sering digunakan untuk tiap member, dari informasi tersebut kita akan mengetahui penggunaan sepeda apakah digunakan untuk bekerja (berada di dalam kota) atau berlibur (berada di sekitar pantai). Karena keterbatasan resource yang saya miliki, saya akan menggunakan data mengenai nama station tiap member.\
\
Kita akan menggunakan data `end_station_name` karena kita ingin mengetahui daerah tujuan pengguna tiap member

```{r}
# Mengambil baris dengan kolom start_station_name dan end_station_name tidak null
annual_member_station <- data_cleaned[!is.na(end_station_name) & member_casual == "Annual Member", .(end_station_name)]

annual_member_station <- annual_member_station %>%
  group_by(end_station_name) %>%
  mutate(annual_freq = n()) %>%
  distinct(end_station_name, .keep_all = TRUE) %>%
  arrange(desc(annual_freq))

annual_member_station <- head(annual_member_station, 5)
```

```{r}
# Mengambil baris dengan kolom start_station_name dan end_station_name tidak null
casual_member_station <- data_cleaned[!is.na(end_station_name) & member_casual == "Casual Member", .(end_station_name)]

casual_member_station <- casual_member_station %>%
  group_by(end_station_name) %>%
  mutate(casual_freq = n()) %>%
  distinct(end_station_name, .keep_all = TRUE) %>%
  arrange(desc(casual_freq))

casual_member_station <- as.data.frame(head(casual_member_station, 5))

```

```{r}
viz_station_casual <- ggplot() +
  geom_bar(stat="identity", data = casual_member_station, aes(x = casual_freq, y = reorder(end_station_name, casual_freq), fill = "red"))+
  scale_fill_manual(values = palet_warna[2])+
  labs(title = "Top 5 Station Destination", x = "Freq Trip", y = "Station Name", subtitle = "Casual Member")+
  theme_minimal()+
  theme(plot.title = element_text(face = "bold"), legend.position = "none", axis.title.y = element_blank())

viz_station_annual <- ggplot() +
  geom_bar(stat="identity", data = annual_member_station, aes(x = annual_freq, y = reorder(end_station_name, annual_freq), fill = "blue"))+
  scale_fill_manual(values = palet_warna[1])+
  theme_minimal()+
  labs(title = "Top 5 Station Destination", x = "Freq Trip", y = "Station Name", subtitle = "Annual Member")+
  theme(plot.title = element_text(face = "bold"), legend.position = "none", axis.title.y = element_blank())
  
```

```{r}
viz_station_annual
```

\
Dari diagram bar di atas didapatkan 5 teratas stasiun tujuan dari annual member yaitu Kingsbury St & Kinzie St (tengah kota), Clark St & Elm St (tengah kota), Wells St & Concord Ln (dekat taman), University Ave & 57th St (tengah kota) dan Clinton St & Washington Blvd (tengah kota). 4 dari 5 stasiun tujuan teratas yang digunakan oleh annual member berada di tengah kota, temuan ini mendukung hipotesa kita diawal

```{r}
viz_station_casual
```

|   Karena keterbatasan device/alat yang saya gunakan visual letak tiap stasiun pada map berdasarkan informasi latitude dan longitude tidak dapat dibuat dibuat, oleh karena itu letak tiap stasiun akan dicari secara manual\\

Dari diagram bar di atas didapatkan 5 teratas stasiun tujuan dari casual member yaitu Streeter Dr & Grand Ave (dekat pantai), DuSable Lake Shore Dr & Monroe St (dekat pantai), Millennium Park (dekat pantai dan taman), Michigan Ave & Oak St (dekat pantai), dan DuSable Lake Shore Dr & North Blvd (dekat pantai). Semua stasiun tujuan yang digunakan oleh casual member berada di dekat pantai, ini menandakan hipotesa kita benar bahwa **Annual member merupakan seseorang yang menggunakan layanan sepeda untuk keperluan formal seperti bekerja dan Casual member merupakan seseorang yang menggunakan layanan sepeda untuk hiburan dan rekreasi.**\
 

\
**Dari informasi yang ada, didapatkan kesimpulkan sementara bahwa:**

1.  Jumlah Annual member lebih banyak dibandingkan Casual member. Diperlukan 669.084 anggota Annual member baru untuk mencapai tujuan projek yaitu kenaikan 20% dari jumlah Annual member.

2.  Bulan yang memiliki jumlah perjalanan/pengguna lebih dari rata-rata tiap tipe member adalah sama, yaitu bulan Mei, Juni, July, Agustus, September dan Oktober. Oleh karena itu, tidak efisien ketika kita membagi strategi pemasaran berdasarkan kuartal per tahun, kita fokuskan pemasran pada bulan-bulan yang memiliki jumlah perjalanan/pengguna lebih dari rata-rata. Perjalanan/penggunan terbanyak untuk Annual Member terjadi pada bulan Agusutus (Late Summer) dan perjalanan/penggunan terbanyak untuk Casual Member terjadi pada bulan Juli (Break Summer).

3.  Hari yang memiliki jumlah perjalanan/pengguna lebih dari rata-rata untuk Annual member terjadi pada hari selasa, rabu dan kamis, sedangkan pada Casual member terjadi pada hari jum'at, sabtu dan minggu.

4.  Annual member merupakan sekelompok orang yang menggunakan layanan sepeda untuk keperluan formal seperti bekerja dan Casual member merupakan sekelompok orang yang menggunakan layanan sepeda untuk hiburan dan rekreasi.

 \

-   Jam perjalanan

```{r}
data_hour <- data_cleaned[,c(.N), by=c("member_casual", "start_hour")]
```

```{r}
viz_hour <- ggplot(data = data_hour, aes(x= start_hour, y = V1 , color = member_casual))+
  geom_line(aes())+
  geom_point()+
  scale_color_manual(values = c("Casual Member" = "#FC8D62", "Annual Member" ="#66C2A5")) +
  labs(x = "Hour",
       y = "Total Trips",
       title = "Start Hour Trips",
       subtitle = "Total start hour trips each member in 2022",
       color = "Member Tipe")+
  scale_x_continuous(breaks = data_hour$start_hour)+
  theme_minimal()+
  theme(plot.title = element_text(face = "bold"))+
  scale_y_continuous(breaks = c(0,100000, 200000, 300000), labels = c("0","100k","200k", "300k"))

viz_hour
```

\
Sesuai dengan hipotesa kita diawal bahawa Annual member merupakan sekelompok orang yang menggunakan layanan sepeda untuk keperluan formal seperti berangkat bekerja, karena terjadi peningkatan pengguna signifikan pada jam 05.00 - 08.00 dan 14.00 - 17.00, rentang jam tersebut merupakan waktu yang biasa digunakan untuk berangkt dan pulang bekerja.\
\
Berbeda dengan penggunaan sepeda oleh Casual member, peningkatan terjadi pada jam 05.00 - 17.00. Fakta ini tidak mendukung hipotesa awal, tapi setidaknya memberikan informai untuk melakukan strategi bisnis (iklan) pada jam tersebut.\

-   Penggunanaan Tipe sepeda

```{r}
data_type_ride <- data_cleaned[,c(.N),by=c("rideable_type","member_casual")]
```

```{r}
viz_type <- ggplot(data = data_type_ride, aes(x=rideable_type, y = V1, fill=member_casual))+
  geom_bar(stat="identity", position="dodge")+
  scale_fill_manual(values = palet_warna) +
  labs(title ="Total Trips per Cycle Type", x="Cycle Type", y="Total Uses", fill="Member Tipe", subtitle="Trip in January-December 2022")+
  scale_y_continuous(breaks = c(0,500000, 1000000, 1500000), labels = c("0","500k","1M", "1.5M"))+
  theme_minimal()+
  theme(plot.title = element_text(face="bold"))

viz_type
```

\
Point penting dari diagram di atas bahwa: Tipe sepeda yang paling banya digunakan oleh Annual member adalah merupakan Classic Bike, tidak ada penggunaan tipe sepeda Docked Bike pada Annual member. Ini memberikan kesimpulan yaitu Strategi bisnis yang dibuat tertuju pada tipe sepda Classic Bike dan Electric Bike.\
\

------------------------------------------------------------------------

------------------------------------------------------------------------

# [Berbagi]{.underline}

\
Dari hasil analisa didapatkan **kesimpulan**:

1.  Diperlukan 669.084 anggota Annual member baru untuk mencapai tujuan projek yaitu kenaikan 20% dari jumlah Annual member. Jika kita fokus pada 6 bulan yang memiliki pengguna diatas rata-rata, untuk mencapai target kita membutuhkan **111.514 anggota annual baru per bulan**.
2.  Strategi pemasaran dimaksimalkan pada bulan **Mei, Juni, July, Agustus, September dan Oktober**, atau **pada periode musim panas.** Pada bulan lain atau pada periode selain musim panas diperlukan riset dan analisis lebih lanjut untuk menentukan strategi pemasaran yang sesuai.
3.  Strategi pemasaran dimaksimalkan di hari **jum'at, sabtu dan minggu** pada jam 10.00 - 20.00
4.  Strategi pemasaran atau layanan baru yang akan diberikan berhubungan dengan penggunaan sepeda untuk **hiburan atau rekreasi** dan pada semua tipe sepeda atau diberikan penawaran khusus untuk tipe Docked Bike.
5.  Maksimalkan strategi pemasaran atau layanan baru pada stasiun berikut: **Streeter Dr & Grand Ave, DuSable Lake Shore Dr & Monroe St, Millennium Park, Michigan Ave & Oak St, dan DuSable Lake Shore Dr & North Blvd**

Kesimpulan yang sudah dibuat dapat menjadi *guideline* untuk tim marketing membuat sebuah strategi pemasaran agar tujuan dapat tercapai

\

------------------------------------------------------------------------

------------------------------------------------------------------------

# [Bertindak]{.underline}

\
Pada tahap ini, semua anggota yang terlibat dapat menerapkan dan menjalankan strategi pemasaran yang sudah dibuat dan fokus untuk mencapai tujuan awal.

\
Terima kasih :)
